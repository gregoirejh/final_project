#!/usr/bin/env coffee

flatten = require "lodash.flatten"
minimist = require "minimist"
metrics = require "#{__dirname}/../src/metrics"

args = minimist(process.argv).metric
metricsItems = flatten([args]).map(JSON.parse)
toInsert = flatten([
  timestamp:(new Date '2013-11-04 14:00 UTC').getTime(), value:12
,
  timestamp:(new Date '2013-11-04 14:10 UTC').getTime(), value:13
,
  metricsItems
,
])

metrics.save "populated", toInsert, (err) ->
  throw err if err 
  console.log "population terminated !"
